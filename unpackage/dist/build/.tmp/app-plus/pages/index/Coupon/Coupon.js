(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/Coupon/Coupon"],{"45e4":function(t,e,n){},"512d":function(t,e,n){"use strict";(function(t){n("b1e6"),n("921b");i(n("66fd"));var e=i(n("8a91"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("6e42")["createPage"])},6830:function(t,e,n){"use strict";(function(t,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(n("a34a")),o=n("2f62");function s(t){return t&&t.__esModule?t:{default:t}}function u(t,e,n,i,a,o,s){try{var u=t[o](s),r=u.value}catch(c){return void n(c)}u.done?e(r):Promise.resolve(r).then(i,a)}function r(t){return function(){var e=this,n=arguments;return new Promise(function(i,a){var o=t.apply(e,n);function s(t){u(o,i,a,s,r,"next",t)}function r(t){u(o,i,a,s,r,"throw",t)}s(void 0)})}}var c=function(){return n.e("components/loading/dialog").then(n.bind(null,"306a"))},l=function(){return n.e("components/loading/dialog-loading").then(n.bind(null,"7213"))},f={computed:(0,o.mapState)(["UserInfo"]),components:{simpleDialog:c,simpleLoading:l},data:function(){return{scrollLeft:0,isClickChange:!1,tabIndex:0,newsitems:[{id:0,arrlist:[]},{id:1,arrlist:[]},{id:2,arrlist:[]}],sDialog:{message:"是否领取加油券",openbtn:"确定"},tabBars:[{name:"未领取",id:0},{name:"未使用",id:1},{name:"已使用",id:2}],couponitem:""}},onLoad:function(){console.log(t(this.UserInfo.userid," at pages\\index\\Coupon\\Coupon.vue:102")),this.GetCoupon()},methods:{goDetail:function(t){i.navigateTo({url:"/pages/template/tabbar/detail/detail?data="+t.title})},Receive:function(e){console.log(t(e," at pages\\index\\Coupon\\Coupon.vue:113")),this.couponitem=e,this.$refs.simpleDialog2.confirm({title:"提示",message:this.sDialog.message})},confirmButton:function(){var e=this,n='{method:"ReceiveGift",gift_id:"'.concat(this.couponitem.礼品标识,'"}');console.log(t(n," at pages\\index\\Coupon\\Coupon.vue:123")),this.$api.ReagisterPhone(n).then(function(t){e.$refs.simpleLoading.show({image:"../../../static/app-plus/tus.png",text:"领取中，请稍后..."}),setTimeout(function(){e.newsitems.forEach(function(t){t.arrlist=[]}),e.$refs.simpleLoading.hide(),e.GetCoupon(),i.showToast({title:"领取成功",duration:1e3,icon:"none"})},1e3)})},cancelButton:function(){console.log(t("Dialog 取消按钮点击"," at pages\\index\\Coupon\\Coupon.vue:145"))},GetCoupon:function(){var e=this,n='{method:"GetUserGift",user_id:"'.concat(this.UserInfo.userid,'"}');this.$api.ReagisterPhone(n).then(function(n){if(console.log(t(n," at pages\\index\\Coupon\\Coupon.vue:151")),0==n.data.result)return console.log(t(n.data.message," at pages\\index\\Coupon\\Coupon.vue:153")),void i.showToast({title:"当前您还没有优惠券",duration:1e3,icon:"none"});var a=JSON.parse(n.data.data);a.forEach(function(t){var n=t.使用日期,i=n.slice(0,4),a=n.slice(4,6),o=n.slice(6,8);t.使用日期=i+"/"+a+"/"+o,t.price=t.礼品价格,t.Explain=t.礼品说明,t.name=t.礼品名称,t.Term=t.有效期,"未领取"==t.礼品状态&&(t.img="../../../static/app-plus/img_lijilingqu_quan.png",e.newsitems[0].arrlist.push(t)),"未使用"==t.礼品状态&&(t.img="../../../static/app-plus/img_lijilingqu_quan.png",e.newsitems[1].arrlist.push(t)),"已使用"==t.礼品状态&&(t.img="../../../static/app-plus/img_yishiyong_bg.png",e.newsitems[2].arrlist.push(t))})})},close:function(t,e){var n=this;i.showModal({content:"是否删除本条信息？",success:function(i){i.confirm&&n.newsitems[t].data.splice(e,1)}})},loadMore:function(t){var e=this;this.newsitems[t].loadingType=1,setTimeout(function(){e.addData(t)},1200)},addData:function(t){if(this.newsitems[t].data.length>30)this.newsitems[t].loadingType=2;else{for(var e=1;e<=10;e++)this.newsitems[t].data.push(this["data"+Math.floor(5*Math.random())]);this.newsitems[t].loadingType=1}},changeTab:function(){var e=r(a.default.mark(function e(n){var i;return a.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(i=n.detail.current,console.log(t(i," at pages\\index\\Coupon\\Coupon.vue:217")),this.isClickChange){e.next=6;break}return this.tabIndex=i,this.isClickChange=!1,e.abrupt("return");case 6:case"end":return e.stop()}},e,this)}));function n(t){return e.apply(this,arguments)}return n}(),getElSize:function(t){return new Promise(function(e,n){i.createSelectorQuery().select("#"+t).fields({size:!0,scrollOffset:!0},function(t){e(t)}).exec()})},tapTab:function(){var t=r(a.default.mark(function t(e){var n,i;return a.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.tabIndex!==e){t.next=4;break}return t.abrupt("return",!1);case 4:return t.next=6,this.getElSize("tab-bar");case 6:n=t.sent,i=n.scrollLeft,this.scrollLeft=i,this.isClickChange=!1,this.tabIndex=e;case 11:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),randomfn:function(){for(var t=[],e=0,n=this.tabBars.length;e<n;e++){for(var i={loadingType:e,data:[]},a=1;a<=10;a++)i.data.push(this["data"+Math.floor(5*Math.random())]);t.push(i)}return t}}};e.default=f}).call(this,n("0de9")["default"],n("6e42")["default"])},"6bdb":function(t,e,n){"use strict";var i=n("45e4"),a=n.n(i);a.a},"6ec1":function(t,e,n){"use strict";n.r(e);var i=n("6830"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,function(){return i[t]})}(o);e["default"]=a.a},"8a91":function(t,e,n){"use strict";n.r(e);var i=n("ef11"),a=n("6ec1");for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);n("6bdb");var s=n("2877"),u=Object(s["a"])(a["default"],i["a"],i["b"],!1,null,"48fd676c",null);e["default"]=u.exports},ef11:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement;t._self._c},a=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return a})}},[["512d","common/runtime","common/vendor"]]]);