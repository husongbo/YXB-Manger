(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tabBar/WeChat/WeChat"],{"7aaa":function(e,t,a){"use strict";(function(e,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a("2f62");function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){i(e,t,a[t])})}return e}function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var s=function(){return a.e("components/loading/alert").then(a.bind(null,"818f"))},u=function(){return a.e("components/loading/dialog").then(a.bind(null,"306a"))},c=function(){return a.e("components/loading/dialog-loading").then(a.bind(null,"7213"))},l={data:function(){return{len:0,startX:0,moveEndX:0,valueX:0,alertarray:{show:!1,msg:""},wxexist:!1,sDialog:{message:"您可能还没有安装微信客户端，请前往安装，或者使用账户和密码登录"},Auth:{OpenId:"",UninId:""},Userform:{nickName:"",avatarUrl:"",UserId:"",UserPh:"000000",UserTime:"",Userinfos:"",Cardinfo:""}}},components:{alerts:s,simpleDialog:u,simpleLoading:c},onLoad:function(e){},methods:r({},(0,o.mapMutations)(["wxlogin"]),{touchstart:function(e){e.preventDefault(),this.startX=e.touches[0].pageX},touchmove:function(t){t.preventDefault(),this.moveEndX=t.touches[0].pageX,this.valueX=this.moveEndX-this.startX,this.valueX>=80&&e.navigateBack({delta:1,animationType:"pop-in",animationDuration:200})},getwxexist:function(){return this.wxexist},confirmButton:function(){console.log(n("Dialog 确定按钮点击"," at pages\\tabBar\\WeChat\\WeChat.vue:87")),plus.runtime.openURL("https://mobile.baidu.com/item?docid=25861398&source=aladdin%40wise_app_23%40title&ala=strong%4025861398%402786482313%40jp1.baidu.com%40title%40%E5%BE%AE%E4%BF%A1&ala=app_mobile_rich%402052%40s%40%E5%BE%AE%E4%BF%A1%E4%B8%8B%E8%BD%BD%4010823306764847032937%40title&from=1022306m")},cancelButton:function(){console.log(n("Dialog 取消按钮点击"," at pages\\tabBar\\WeChat\\WeChat.vue:91"))},openloading:function(){this.$refs.simpleLoading.show({image:"../../../static/app-plus/tus.png",text:"登陆中..."})},closeloading:function(){this.$refs.simpleLoading.hide()},GetDatas:function(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1,n=e.getDate();a=a<10?"0"+a:a,n=n<10?"0"+n:n,this.Userform.UserTime=t+"-"+a+"-"+n},AjaxUserInfo:function(){var t=this,a=this,o='{method:"GetUserInfo",user_id:"'.concat(this.Userform.UserId,'"}');this.$api.ReagisterPhone(o).then(function(o){console.log(n(JSON.stringify(o)," at pages\\tabBar\\WeChat\\WeChat.vue:117")),t.Userform.Userinfos=JSON.parse(o.data.user_info)[0];var r='{method:"GetUserInfo",user_id:"'.concat(a.Userform.UserId,'"}');a.$api.ReagisterPhone(r).then(function(o){console.log(n(JSON.parse(o.data.user_info)[0].M0001_PHONE," at pages\\tabBar\\WeChat\\WeChat.vue:121"));var r=/^[1][3,4,5,7,8][0-9]{9}$/;r.test(JSON.parse(o.data.user_info)[0].M0001_PHONE)?(a.Userform.UserPh=JSON.parse(o.data.user_info)[0].M0001_PHONE,console.log(n(a.Userform.UserPh," at pages\\tabBar\\WeChat\\WeChat.vue:125"))):(a.Userform.UserPh="000000",console.log(n(a.Userform," at pages\\tabBar\\WeChat\\WeChat.vue:129")));var i='{method:"GetUserCard",user_id:"'.concat(t.Userform.UserId,'"}');t.$api.ReagisterPhone(i).then(function(t){console.log(n(JSON.stringify(t)," at pages\\tabBar\\WeChat\\WeChat.vue:133")),0==t.data.result?a.Userform.Cardinfo="no":a.Userform.Cardinfo=JSON.parse(t.data.data)[0],a.GetDatas(),console.log(n(JSON.stringify(a.Userform)," at pages\\tabBar\\WeChat\\WeChat.vue:141")),a.wxlogin(a.Userform),a.openloading(),setTimeout(function(){a.closeloading(),e.showToast({title:"登录成功",duration:1e3,icon:"none",success:function(){e.switchTab({url:"/pages/tabBar/personCenter/personCenter"})}})},1e3)})})})},thirdLogin:function(){var t=this;e.showToast({title:"正在授权中,请稍后...",duration:2e3,icon:"none"}),e.getProvider({service:"oauth",success:function(a){console.log(n(JSON.stringify(a)," at pages\\tabBar\\WeChat\\WeChat.vue:171")),~a.provider.indexOf("weixin")&&e.login({provider:"weixin",success:function(a){console.log(n(JSON.stringify(a)," at pages\\tabBar\\WeChat\\WeChat.vue:176")),t.wxexist=!0,console.log(n(t.wxexist," at pages\\tabBar\\WeChat\\WeChat.vue:178")),e.hideToast(),e.getUserInfo({provider:"weixin",success:function(e){console.log(n(JSON.stringify(e)," at pages\\tabBar\\WeChat\\WeChat.vue:184")),console.log(n("-------获取微信用户所有-----"," at pages\\tabBar\\WeChat\\WeChat.vue:185")),t.Auth.OpenId=e.userInfo.openId,t.Auth.UninId=e.userInfo.unionId;var a='{method:"AuthLogin",openId:"'.concat(t.Auth.OpenId,'",uninid:"').concat(t.Auth.UninId,'"}');t.$api.AuthLogin(a).then(function(a){console.log(n(a.data.user_id," at pages\\tabBar\\WeChat\\WeChat.vue:190")),t.Userform.UserId=a.data.user_id,t.Userform.avatarUrl=e.userInfo.avatarUrl,t.Userform.nickName=e.userInfo.nickName,t.AjaxUserInfo()})}})},fail:function(e){if(console.log(n(JSON.stringify(e)," at pages\\tabBar\\WeChat\\WeChat.vue:203")),-8==e.code){var a=t.getwxexist();console.log(n(a," at pages\\tabBar\\WeChat\\WeChat.vue:206")),a||t.$refs.simpleDialog2.confirm({title:"提示！",message:t.sDialog.message})}},complete:function(){}})}})}})};t.default=l}).call(this,a("6e42")["default"],a("0de9")["default"])},a420:function(e,t,a){"use strict";(function(e){a("b1e6"),a("921b");n(a("66fd"));var t=n(a("dc9d"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,a("6e42")["createPage"])},c6a7:function(e,t,a){"use strict";a.r(t);var n=a("7aaa"),o=a.n(n);for(var r in n)"default"!==r&&function(e){a.d(t,e,function(){return n[e]})}(r);t["default"]=o.a},d991:function(e,t,a){"use strict";var n=a("f4d1"),o=a.n(n);o.a},dc9d:function(e,t,a){"use strict";a.r(t);var n=a("f693"),o=a("c6a7");for(var r in o)"default"!==r&&function(e){a.d(t,e,function(){return o[e]})}(r);a("d991");var i=a("2877"),s=Object(i["a"])(o["default"],n["a"],n["b"],!1,null,null,null);t["default"]=s.exports},f4d1:function(e,t,a){},f693:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement;e._self._c},o=[];a.d(t,"a",function(){return n}),a.d(t,"b",function(){return o})}},[["a420","common/runtime","common/vendor"]]]);