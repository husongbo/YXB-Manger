(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tabBar/component/component"],{"080e":function(t,e,o){"use strict";o.r(e);var i=o("6f91"),n=o("1c86");for(var a in n)"default"!==a&&function(t){o.d(e,t,function(){return n[t]})}(a);o("265c");var s=o("2877"),c=Object(s["a"])(n["default"],i["a"],i["b"],!1,null,null,null);e["default"]=c.exports},"1c86":function(t,e,o){"use strict";o.r(e);var i=o("8910"),n=o.n(i);for(var a in i)"default"!==a&&function(t){o.d(e,t,function(){return i[t]})}(a);e["default"]=n.a},"265c":function(t,e,o){"use strict";var i=o("93a9"),n=o.n(i);n.a},2960:function(t,e,o){"use strict";(function(t){o("b1e6"),o("921b");i(o("66fd"));var e=i(o("080e"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("6e42")["createPage"])},"6f91":function(t,e,o){"use strict";var i=function(){var t=this,e=t.$createElement;t._self._c},n=[];o.d(e,"a",function(){return i}),o.d(e,"b",function(){return n})},8910:function(module,exports,__webpack_require__){"use strict";(function(__f__,uni){Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _amapWx=_interopRequireDefault(__webpack_require__("2ab6")),_json=_interopRequireDefault(__webpack_require__("ebfd"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var simpleLoading=function(){return __webpack_require__.e("components/loading/dialog-loading").then(__webpack_require__.bind(null,"7213"))},_default={data:function(){return{keys:"78e2cf5d6b8404995216797147d317c1",maptrue:"block",mapleft:!0,mapright:!1,maplbtrue:"none",mappos:!0,title:"map",latitude:"",longitude:"",clcikId:"",thousand:1e3,trips:"",polylines:[],circle:[{}],selectedindex:0,mapdisgood:{name:"",address:"",distance:"",latitude:"",longitude:""},covers:[{latitude:"",longitude:"",iconPath:"../../../static/login/loca.png",label:{content:"",color:"#FCFCFC",padding:20,textAlign:"center"}}],controlss:[{id:1,position:{left:10,top:420,width:30,height:30},iconPath:"../../../static/app-plus/map.png",clickable:!0}],scale:10,coverlist:[],Pos:"",City:"",OpenMap:!1,CloseMaps:!1,locationlat:"",locationlon:"",CityArr:"",CityCode:"",ArrLocation:[],MapHeight:"",titleheight:"",gotoheight:"",mapsheight:""}},components:{simpleLoading:simpleLoading},mounted:function(){console.log(__f__("开始了"," at pages\\tabBar\\component\\component.vue:124")),this.CityArr=_json.default.City,console.log(__f__(this.CityArr," at pages\\tabBar\\component\\component.vue:126"));var t=this;uni.getSystemInfo({success:function(e){var o=e.windowHeight;t.MapHeight=o+"px",t.titleheight="45px",t.gotoheight="85px",t.mapsheight=o-130+"px",console.log(__f__(e.windowHeight," at pages\\tabBar\\component\\component.vue:135"))}}),uni.getNetworkType({success:function(e){if(console.log(__f__(e.networkType," at pages\\tabBar\\component\\component.vue:140")),"none"==e.networkType)return console.log(__f__(e.networkType," at pages\\tabBar\\component\\component.vue:142")),void(t.CloseMaps=!0);t.$refs.simpleLoading.show({image:"../../../static/app-plus/tus.png",text:"加载中..."}),t.getmaplocation(),t.checkPermissionPos()}}),uni.onNetworkStatusChange(function(e){if(!e.isConnected)return t.OpenMap=!1,t.CloseMaps=!0,console.log(__f__(e.isConnected," at pages\\tabBar\\component\\component.vue:158")),void console.log(__f__(e.networkType," at pages\\tabBar\\component\\component.vue:159"));t.$refs.simpleLoading.show({image:"../../../static/app-plus/tus.png",text:"加载中..."}),t.getmaplocation(),t.checkPermissionPos(),console.log(__f__(e.isConnected," at pages\\tabBar\\component\\component.vue:168")),console.log(__f__(e.networkType," at pages\\tabBar\\component\\component.vue:169"))})},methods:{dianclick:function(t){this.clcikId=parseInt(t.mp.markerId);for(var e=0;e<this.coverlist.length;e++)this.coverlist[e].id==this.clcikId&&(this.mapdisgood.name=this.coverlist[e].name,this.mapdisgood.address=this.coverlist[e].address,this.mapdisgood.distance=this.coverlist[e].distances,this.mapdisgood.latitude=this.coverlist[e].latitude,this.mapdisgood.longitude=this.coverlist[e].longitude,console.log(__f__(JSON.stringify(this.covers[e])," at pages\\tabBar\\component\\component.vue:185")))},clickcontrol:function(t){this.latitude=this.locationlat,this.longitude=this.locationlon},SaveLocation:function(t,e,o){var i=this.getDisance(this.latitude,this.longitude,t,e),n=this.Transformation(i),a={latitude:t,longitude:e,iconPath:"../../../static/app-plus/tus.png",id:o.id,address:o.address,name:o.station,distances:n.middles,label:{content:""},mid:n.mid};this.covers.push(a),this.coverlist.push(a)},sortDistances:function(t,e){return t=parseFloat(t.mid),e=parseFloat(e.mid),t-e},bd_decrypt:function(t,e){var o=3e3*Math.PI/180,i=t-.0065,n=e-.006,a=Math.sqrt(i*i+n*n)-2e-5*Math.sin(n*o),s=Math.atan2(n,i)-3e-6*Math.cos(i*o),c=a*Math.cos(s),l=a*Math.sin(s);return{lng:c,lat:l}},getmaplocation:function getmaplocation(){var _this2=this,_this=this,myAmapFun=new _amapWx.default.AMapWX({key:this.keys});myAmapFun.getRegeo({success:function success(data){console.log(__f__(JSON.stringify(data)," at pages\\tabBar\\component\\component.vue:240")),_this2.latitude=data[0].latitude,_this2.longitude=data[0].longitude,_this2.locationlat=data[0].latitude,_this2.locationlon=data[0].longitude,_this2.Pos=_this2.longitude+","+_this2.latitude,_this2.circle[0].latitude=_this2.latitude,_this2.circle[0].longitude=_this2.longitude,_this2.covers[0].latitude=_this2.latitude,_this2.covers[0].longitude=_this2.longitude,_this2.circle[0].color="#FF0000",_this2.circle[0].fillColor="#FF0000",_this2.circle[0].radius=50,console.log(__f__(_this2.latitude," at pages\\tabBar\\component\\component.vue:253")),console.log(__f__(_this2.longitude," at pages\\tabBar\\component\\component.vue:254")),_this2.City=data[0].regeocodeData.addressComponent.city,_this2.CityArr.forEach(function(t){t.text==_this.City&&(_this.CityCode=t.id)}),console.log(__f__("当前的值"+_this.CityCode," at pages\\tabBar\\component\\component.vue:261"));var datas='{method:"GetStationInfo",city_code:"'.concat(_this2.CityCode,'"}');console.log(__f__(JSON.stringify(datas)," at pages\\tabBar\\component\\component.vue:263")),uni.request({url:"http://smstest.youxinbao.com.cn/App/Common/CSharp/app/user/UserInfo.ashx",data:{params:datas},success:function success(res){console.log(__f__(JSON.stringify(res)," at pages\\tabBar\\component\\component.vue:270")),1==res.data.result&&(_this.ArrLocation=eval(res.data.data),_this.ArrLocation.forEach(function(t){var e=_this.bd_decrypt(t.longitude,t.latitude);_this.SaveLocation(e.lat,e.lng,t)}),_this.coverlist.sort(_this.sortDistances),_this.coverlist[0].label.content=_this.coverlist[0].name,_this.mapdisgood.name=_this.coverlist[0].name,_this.mapdisgood.address=_this.coverlist[0].address,_this.mapdisgood.distance=_this.coverlist[0].distances,_this.mapdisgood.latitude=_this.coverlist[0].latitude,_this.mapdisgood.longitude=_this.coverlist[0].longitude,_this.$refs.simpleLoading.hide(),_this.OpenMap=!0)}})},fail:function(){console.log(__f__("出错了"," at pages\\tabBar\\component\\component.vue:292"))}})},mappointers:function(){this.polylines=[],this.polylines.push({points:[{longitude:this.longitude,latitude:this.latitude},{longitude:this.mapdisgood.longitude,latitude:this.mapdisgood.latitude}],color:"#FF6347",width:5,dottedLine:!1,borderWidth:3})},mapleftmethods:function(){this.mapleft=!0,this.mapright=!1,this.maptrue="block",this.maplbtrue="none",this.mappos=!0,this.controlss[0].position.top="420"},maprightmethods:function(){this.mapleft=!1,this.mapright=!0,this.maptrue="none",this.maplbtrue="block",this.mappos=!1,this.controlss[0].position.top="600"},toRad:function(t){return t*Math.PI/180},getDisance:function(t,e,o,i){var n=0,a=this.toRad(t),s=this.toRad(o),c=a-s,l=this.toRad(e)-this.toRad(i);n=2*Math.asin(Math.sqrt(Math.pow(Math.sin(c/2),2)+Math.cos(a)*Math.cos(s)*Math.pow(Math.sin(l/2),2)));return 6378137*n},Transformation:function(t){var e=parseInt(t);if(e<this.thousand)return{middles:e+"m",mid:.001*e};var o=parseInt(e/this.thousand),i=parseInt(e%this.thousand).toString();return i=i.substring(0,2),{middles:o+"."+i+"km",mid:o+"."+i}},Gomap:function(){console.log(__f__(this.mapdisgood.latitude," at pages\\tabBar\\component\\component.vue:351")),console.log(__f__(this.mapdisgood.longitude," at pages\\tabBar\\component\\component.vue:352")),uni.openLocation({name:this.mapdisgood.name,address:this.mapdisgood.address,latitude:parseFloat(this.mapdisgood.latitude),longitude:parseFloat(this.mapdisgood.longitude),scale:28})},getMappos:function(t){this.coverlist.forEach(function(e){e.id==t.id?e.label.content=e.name:e.label.content=""}),this.mapdisgood.name=t.name,this.mapdisgood.address=t.address,this.mapdisgood.distance=t.distances,this.mapdisgood.latitude=t.latitude,this.mapdisgood.longitude=t.longitude,this.latitude=t.latitude,this.longitude=t.longitude,this.mapleftmethods(),this.mappointers(),console.log(__f__(JSON.stringify(t)," at pages\\tabBar\\component\\component.vue:382"))},checkPermissionPos:function(){plus.geolocation.getCurrentPosition(function(t){console.log(__f__("Geolocation\nLatitude:"+t.coords.latitude+"\nLongitude:"+t.coords.longitude+"\nAltitude:"+t.coords.altitude," at pages\\tabBar\\component\\component.vue:389"))},function(t){switch(t.code){case t.PERMISSION_DENIED:plus.nativeUI.alert("用户拒绝了地理定位请求.");break;case t.POSITION_UNAVAILABLE:plus.nativeUI.alert("位置信息不可用.");break;case t.TIMEOUT:plus.nativeUI.alert("获取用户位置的请求超时.");break;case t.UNKNOWN_ERROR:plus.nativeUI.alert("未知错误.");break}})},Gorefueling:function(){uni.navigateTo({url:"../../function/Buygasrolls/Buygasrolls",animationType:"pop-in",animationDuration:200})}}};exports.default=_default}).call(this,__webpack_require__("0de9")["default"],__webpack_require__("6e42")["default"])},"93a9":function(t,e,o){}},[["2960","common/runtime","common/vendor"]]]);