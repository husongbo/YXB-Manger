(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tabBar/component/component"],{"0722":function(t,e,i){"use strict";i.r(e);var s=i("f5b2"),o=i("b24b");for(var a in o)"default"!==a&&function(t){i.d(e,t,function(){return o[t]})}(a);i("ff0b");var n=i("2877"),r=Object(n["a"])(o["default"],s["a"],s["b"],!1,null,null,null);e["default"]=r.exports},"2b98":function(t,e,i){"use strict";i("fa0a");var s=a(i("b0ce")),o=a(i("0722"));function a(t){return t&&t.__esModule?t:{default:t}}Page((0,s.default)(o.default))},"3b4e":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s={City:[{text:"成都市",id:5101},{text:"自贡市",id:5103},{text:"攀枝花市",id:5104},{text:"泸州市",id:5105},{text:"德阳市",id:5106},{text:"绵阳市",id:5107},{text:"广元市",id:5108},{text:"遂宁市",id:5109},{text:"内江市",id:5110},{text:"乐山市",id:5111},{text:"南充市",id:5113},{text:"眉山市",id:5114},{text:"宜宾市",id:5115},{text:"广安市",id:5116},{text:"达州市",id:5117},{text:"雅安市",id:5118},{text:"巴中市",id:5119},{text:"资阳市",id:5120},{text:"阿坝藏族羌族自治州",id:5132},{text:"甘孜藏族自治州",id:5133},{text:"凉山彝族自治州",id:5134}]};e.default=s},4008:function(t,e,i){"use strict";function s(t){this.key=t.key,this.requestConfig={key:t.key,s:"rsx",platform:"WXJS",appname:t.key,sdkversion:"1.2.0",logversion:"2.0"}}s.prototype.getWxLocation=function(t,e){wx.getLocation({type:"gcj02",success:function(t){var i=t.longitude+","+t.latitude;wx.setStorage({key:"userLocation",data:i}),e(i)},fail:function(i){wx.getStorage({key:"userLocation",success:function(t){t.data&&e(t.data)}}),t.fail({errCode:"0",errMsg:i.errMsg||""})}})},s.prototype.getRegeo=function(t){function e(e){var s=i.requestConfig;wx.request({url:"https://restapi.amap.com/v3/geocode/regeo",data:{key:i.key,location:e,extensions:"all",s:s.s,platform:s.platform,appname:i.key,sdkversion:s.sdkversion,logversion:s.logversion},method:"GET",header:{"content-type":"application/json"},success:function(i){var s,o,a,n,r,d,c,l,p;i.data.status&&"1"==i.data.status?(s=i.data.regeocode,o=s.addressComponent,a=[],n="",s&&s.roads[0]&&s.roads[0].name&&(n=s.roads[0].name+"附近"),r=e.split(",")[0],d=e.split(",")[1],s.pois&&s.pois[0]&&(n=s.pois[0].name+"附近",c=s.pois[0].location,c&&(r=parseFloat(c.split(",")[0]),d=parseFloat(c.split(",")[1]))),o.provice&&a.push(o.provice),o.city&&a.push(o.city),o.district&&a.push(o.district),o.streetNumber&&o.streetNumber.street&&o.streetNumber.number?(a.push(o.streetNumber.street),a.push(o.streetNumber.number)):(l="",s&&s.roads[0]&&s.roads[0].name&&(l=s.roads[0].name),a.push(l)),a=a.join(""),p=[{iconPath:t.iconPath,width:t.iconWidth,height:t.iconHeight,name:a,desc:n,longitude:r,latitude:d,id:0,regeocodeData:s}],t.success(p)):t.fail({errCode:i.data.infocode,errMsg:i.data.info})},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})}var i=this;t.location?e(t.location):i.getWxLocation(t,function(t){e(t)})},s.prototype.getWeather=function(t){function e(e){var i="base";t.type&&"forecast"==t.type&&(i="all"),wx.request({url:"https://restapi.amap.com/v3/weather/weatherInfo",data:{key:s.key,city:e,extensions:i,s:o.s,platform:o.platform,appname:s.key,sdkversion:o.sdkversion,logversion:o.logversion},method:"GET",header:{"content-type":"application/json"},success:function(e){function i(t){var e={city:{text:"城市",data:t.city},weather:{text:"天气",data:t.weather},temperature:{text:"温度",data:t.temperature},winddirection:{text:"风向",data:t.winddirection+"风"},windpower:{text:"风力",data:t.windpower+"级"},humidity:{text:"湿度",data:t.humidity+"%"}};return e}var s,o;e.data.status&&"1"==e.data.status?e.data.lives?(s=e.data.lives,s&&s.length>0&&(s=s[0],o=i(s),o["liveData"]=s,t.success(o))):e.data.forecasts&&e.data.forecasts[0]&&t.success({forecast:e.data.forecasts[0]}):t.fail({errCode:e.data.infocode,errMsg:e.data.info})},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})}function i(i){wx.request({url:"https://restapi.amap.com/v3/geocode/regeo",data:{key:s.key,location:i,extensions:"all",s:o.s,platform:o.platform,appname:s.key,sdkversion:o.sdkversion,logversion:o.logversion},method:"GET",header:{"content-type":"application/json"},success:function(i){var s,o;i.data.status&&"1"==i.data.status?(o=i.data.regeocode,o.addressComponent?s=o.addressComponent.adcode:o.aois&&o.aois.length>0&&(s=o.aois[0].adcode),e(s)):t.fail({errCode:i.data.infocode,errMsg:i.data.info})},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})}var s=this,o=s.requestConfig;t.city?e(t.city):s.getWxLocation(t,function(t){i(t)})},s.prototype.getPoiAround=function(t){function e(e){var o={key:i.key,location:e,s:s.s,platform:s.platform,appname:i.key,sdkversion:s.sdkversion,logversion:s.logversion};t.querytypes&&(o["types"]=t.querytypes),t.querykeywords&&(o["keywords"]=t.querykeywords),wx.request({url:"https://restapi.amap.com/v3/place/around",data:o,method:"GET",header:{"content-type":"application/json"},success:function(e){var i,s,o,a;if(e.data.status&&"1"==e.data.status){if(e=e.data,e&&e.pois){for(i=[],s=0;s<e.pois.length;s++)o=0==s?t.iconPathSelected:t.iconPath,i.push({latitude:parseFloat(e.pois[s].location.split(",")[1]),longitude:parseFloat(e.pois[s].location.split(",")[0]),iconPath:o,width:22,height:32,id:s,name:e.pois[s].name,address:e.pois[s].address});a={markers:i,poisData:e.pois},t.success(a)}}else t.fail({errCode:e.data.infocode,errMsg:e.data.info})},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})}var i=this,s=i.requestConfig;t.location?e(t.location):i.getWxLocation(t,function(t){e(t)})},s.prototype.getStaticmap=function(t){function e(e){o.push("location="+e),t.zoom&&o.push("zoom="+t.zoom),t.size&&o.push("size="+t.size),t.scale&&o.push("scale="+t.scale),t.markers&&o.push("markers="+t.markers),t.labels&&o.push("labels="+t.labels),t.paths&&o.push("paths="+t.paths),t.traffic&&o.push("traffic="+t.traffic);var i=a+o.join("&");t.success({url:i})}var i,s=this,o=[],a="https://restapi.amap.com/v3/staticmap?";o.push("key="+s.key),i=s.requestConfig,o.push("s="+i.s),o.push("platform="+i.platform),o.push("appname="+i.appname),o.push("sdkversion="+i.sdkversion),o.push("logversion="+i.logversion),t.location?e(t.location):s.getWxLocation(t,function(t){e(t)})},s.prototype.getInputtips=function(t){var e=this,i=e.requestConfig,s={key:e.key,s:i.s,platform:i.platform,appname:e.key,sdkversion:i.sdkversion,logversion:i.logversion};t.location&&(s["location"]=t.location),t.keywords&&(s["keywords"]=t.keywords),t.type&&(s["type"]=t.type),t.city&&(s["city"]=t.city),t.citylimit&&(s["citylimit"]=t.citylimit),wx.request({url:"https://restapi.amap.com/v3/assistant/inputtips",data:s,method:"GET",header:{"content-type":"application/json"},success:function(e){e&&e.data&&e.data.tips&&t.success({tips:e.data.tips})},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})},s.prototype.getDrivingRoute=function(t){var e=this,i=e.requestConfig,s={key:e.key,s:i.s,platform:i.platform,appname:e.key,sdkversion:i.sdkversion,logversion:i.logversion};t.origin&&(s["origin"]=t.origin),t.destination&&(s["destination"]=t.destination),t.strategy&&(s["strategy"]=t.strategy),t.waypoints&&(s["waypoints"]=t.waypoints),t.avoidpolygons&&(s["avoidpolygons"]=t.avoidpolygons),t.avoidroad&&(s["avoidroad"]=t.avoidroad),wx.request({url:"https://restapi.amap.com/v3/direction/driving",data:s,method:"GET",header:{"content-type":"application/json"},success:function(e){e&&e.data&&e.data.route&&t.success({paths:e.data.route.paths,taxi_cost:e.data.route.taxi_cost||""})},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})},s.prototype.getWalkingRoute=function(t){var e=this,i=e.requestConfig,s={key:e.key,s:i.s,platform:i.platform,appname:e.key,sdkversion:i.sdkversion,logversion:i.logversion};t.origin&&(s["origin"]=t.origin),t.destination&&(s["destination"]=t.destination),wx.request({url:"https://restapi.amap.com/v3/direction/walking",data:s,method:"GET",header:{"content-type":"application/json"},success:function(e){e&&e.data&&e.data.route&&t.success({paths:e.data.route.paths})},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})},s.prototype.getTransitRoute=function(t){var e=this,i=e.requestConfig,s={key:e.key,s:i.s,platform:i.platform,appname:e.key,sdkversion:i.sdkversion,logversion:i.logversion};t.origin&&(s["origin"]=t.origin),t.destination&&(s["destination"]=t.destination),t.strategy&&(s["strategy"]=t.strategy),t.city&&(s["city"]=t.city),t.cityd&&(s["cityd"]=t.cityd),wx.request({url:"https://restapi.amap.com/v3/direction/transit/integrated",data:s,method:"GET",header:{"content-type":"application/json"},success:function(e){if(e&&e.data&&e.data.route){var i=e.data.route;t.success({distance:i.distance||"",taxi_cost:i.taxi_cost||"",transits:i.transits})}},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})},s.prototype.getRidingRoute=function(t){var e=this,i=e.requestConfig,s={key:e.key,s:i.s,platform:i.platform,appname:e.key,sdkversion:i.sdkversion,logversion:i.logversion};t.origin&&(s["origin"]=t.origin),t.destination&&(s["destination"]=t.destination),wx.request({url:"https://restapi.amap.com/v4/direction/bicycling",data:s,method:"GET",header:{"content-type":"application/json"},success:function(e){e&&e.data&&e.data.data&&t.success({paths:e.data.data.paths})},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})},t.exports.AMapWX=s},b24b:function(t,e,i){"use strict";i.r(e);var s=i("d58e"),o=i.n(s);for(var a in s)"default"!==a&&function(t){i.d(e,t,function(){return s[t]})}(a);e["default"]=o.a},b3b8:function(t,e,i){},d58e:function(module,exports,__webpack_require__){"use strict";(function(uni){Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _amapWx=_interopRequireDefault(__webpack_require__("4008")),_dialogLoading=_interopRequireDefault(__webpack_require__("79ee")),_json=_interopRequireDefault(__webpack_require__("3b4e"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var _default={data:function(){return{keys:"78e2cf5d6b8404995216797147d317c1",maptrue:"block",mapleft:!0,mapright:!1,maplbtrue:"none",mappos:!0,title:"map",latitude:"",longitude:"",clcikId:"",thousand:1e3,trips:"",polylines:[],circle:[{}],selectedindex:0,mapdisgood:{name:"",address:"",distance:"",latitude:"",longitude:""},covers:[{latitude:"",longitude:"",iconPath:"../../../static/login/loca.png",label:{content:"",color:"#FCFCFC",padding:20,textAlign:"center"}}],controlss:[{id:1,position:{left:10,top:420,width:30,height:30},iconPath:"../../../static/app-plus/map.png",clickable:!0}],scale:10,coverlist:[],Pos:"",City:"",OpenMap:!1,CloseMaps:!1,locationlat:"",locationlon:"",CityArr:"",CityCode:"",ArrLocation:[],MapHeight:"",titleheight:"",gotoheight:"",mapsheight:""}},components:{simpleLoading:_dialogLoading.default},mounted:function(){console.log("开始了"),this.CityArr=_json.default.City,console.log(this.CityArr);var t=this;uni.getSystemInfo({success:function(e){var i=e.windowHeight;t.MapHeight=i+"px",t.titleheight="45px",t.gotoheight="85px",t.mapsheight=i-130+"px",console.log(e.windowHeight)}}),uni.getNetworkType({success:function(e){if(console.log(e.networkType),"none"==e.networkType)return console.log(e.networkType),void(t.CloseMaps=!0);t.$refs.simpleLoading.show({image:"../../../static/app-plus/tus.png",text:"加载中..."}),t.getmaplocation(),t.checkPermissionPos()}}),uni.onNetworkStatusChange(function(e){if(!e.isConnected)return t.OpenMap=!1,t.CloseMaps=!0,console.log(e.isConnected),void console.log(e.networkType);t.$refs.simpleLoading.show({image:"../../../static/app-plus/tus.png",text:"加载中..."}),t.getmaplocation(),t.checkPermissionPos(),console.log(e.isConnected),console.log(e.networkType)})},methods:{dianclick:function(t){this.clcikId=parseInt(t.mp.markerId);for(var e=0;e<this.coverlist.length;e++)this.coverlist[e].id==this.clcikId&&(this.mapdisgood.name=this.coverlist[e].name,this.mapdisgood.address=this.coverlist[e].address,this.mapdisgood.distance=this.coverlist[e].distances,this.mapdisgood.latitude=this.coverlist[e].latitude,this.mapdisgood.longitude=this.coverlist[e].longitude,console.log(JSON.stringify(this.covers[e])))},clickcontrol:function(t){this.latitude=this.locationlat,this.longitude=this.locationlon},SaveLocation:function(t,e,i){var s=this.getDisance(this.latitude,this.longitude,t,e),o=this.Transformation(s),a={latitude:t,longitude:e,iconPath:"../../../static/app-plus/tus.png",id:i.id,address:i.address,name:i.station,distances:o.middles,label:{content:""},mid:o.mid};this.covers.push(a),this.coverlist.push(a)},sortDistances:function(t,e){return t=parseFloat(t.mid),e=parseFloat(e.mid),t-e},bd_decrypt:function(t,e){var i=3e3*Math.PI/180,s=t-.0065,o=e-.006,a=Math.sqrt(s*s+o*o)-2e-5*Math.sin(o*i),n=Math.atan2(o,s)-3e-6*Math.cos(s*i),r=a*Math.cos(n),d=a*Math.sin(n);return{lng:r,lat:d}},getmaplocation:function getmaplocation(){var _this2=this,_this=this,myAmapFun=new _amapWx.default.AMapWX({key:this.keys});myAmapFun.getRegeo({success:function success(data){console.log(JSON.stringify(data)),_this2.latitude=data[0].latitude,_this2.longitude=data[0].longitude,_this2.locationlat=data[0].latitude,_this2.locationlon=data[0].longitude,_this2.Pos=_this2.longitude+","+_this2.latitude,_this2.circle[0].latitude=_this2.latitude,_this2.circle[0].longitude=_this2.longitude,_this2.covers[0].latitude=_this2.latitude,_this2.covers[0].longitude=_this2.longitude,_this2.circle[0].color="#FF0000",_this2.circle[0].fillColor="#FF0000",_this2.circle[0].radius=50,console.log(_this2.latitude),console.log(_this2.longitude),_this2.City=data[0].regeocodeData.addressComponent.city,_this2.CityArr.forEach(function(t){t.text==_this.City&&(_this.CityCode=t.id)}),console.log("当前的值"+_this.CityCode);var datas='{method:"GetStationInfo",city_code:"'.concat(_this2.CityCode,'"}');console.log(JSON.stringify(datas)),uni.request({url:"http://www.uzdust.cn/App/Common/CSharp/app/user/UserInfo.ashx",data:{params:datas},success:function success(res){console.log(JSON.stringify(res)),1==res.data.result&&(_this.ArrLocation=eval(res.data.data),_this.ArrLocation.forEach(function(t){var e=_this.bd_decrypt(t.longitude,t.latitude);_this.SaveLocation(e.lat,e.lng,t)}),_this.coverlist.sort(_this.sortDistances),_this.coverlist[0].label.content=_this.coverlist[0].name,_this.mapdisgood.name=_this.coverlist[0].name,_this.mapdisgood.address=_this.coverlist[0].address,_this.mapdisgood.distance=_this.coverlist[0].distances,_this.mapdisgood.latitude=_this.coverlist[0].latitude,_this.mapdisgood.longitude=_this.coverlist[0].longitude,_this.$refs.simpleLoading.hide(),_this.OpenMap=!0)}})},fail:function(){console.log("出错了")}})},mappointers:function(){this.polylines=[],this.polylines.push({points:[{longitude:this.longitude,latitude:this.latitude},{longitude:this.mapdisgood.longitude,latitude:this.mapdisgood.latitude}],color:"#FF6347",width:5,dottedLine:!1,borderWidth:3})},mapleftmethods:function(){this.mapleft=!0,this.mapright=!1,this.maptrue="block",this.maplbtrue="none",this.mappos=!0,this.controlss[0].position.top="420"},maprightmethods:function(){this.mapleft=!1,this.mapright=!0,this.maptrue="none",this.maplbtrue="block",this.mappos=!1,this.controlss[0].position.top="600"},toRad:function(t){return t*Math.PI/180},getDisance:function(t,e,i,s){var o=0,a=this.toRad(t),n=this.toRad(i),r=a-n,d=this.toRad(e)-this.toRad(s);o=2*Math.asin(Math.sqrt(Math.pow(Math.sin(r/2),2)+Math.cos(a)*Math.cos(n)*Math.pow(Math.sin(d/2),2)));return 6378137*o},Transformation:function(t){var e=parseInt(t);if(e<this.thousand)return{middles:e+"m",mid:.001*e};var i=parseInt(e/this.thousand),s=parseInt(e%this.thousand).toString();return s=s.substring(0,2),{middles:i+"."+s+"km",mid:i+"."+s}},Gomap:function(){console.log(this.mapdisgood.latitude),console.log(this.mapdisgood.longitude),uni.openLocation({name:this.mapdisgood.name,address:this.mapdisgood.address,latitude:parseFloat(this.mapdisgood.latitude),longitude:parseFloat(this.mapdisgood.longitude),scale:28})},getMappos:function(t){this.coverlist.forEach(function(e){e.id==t.id?e.label.content=e.name:e.label.content=""}),this.mapdisgood.name=t.name,this.mapdisgood.address=t.address,this.mapdisgood.distance=t.distances,this.mapdisgood.latitude=t.latitude,this.mapdisgood.longitude=t.longitude,this.latitude=t.latitude,this.longitude=t.longitude,this.mapleftmethods(),this.mappointers(),console.log(JSON.stringify(t))},checkPermissionPos:function(){plus.geolocation.getCurrentPosition(function(t){console.log("Geolocation\nLatitude:"+t.coords.latitude+"\nLongitude:"+t.coords.longitude+"\nAltitude:"+t.coords.altitude)},function(t){switch(t.code){case t.PERMISSION_DENIED:plus.nativeUI.alert("用户拒绝了地理定位请求.");break;case t.POSITION_UNAVAILABLE:plus.nativeUI.alert("位置信息不可用.");break;case t.TIMEOUT:plus.nativeUI.alert("获取用户位置的请求超时.");break;case t.UNKNOWN_ERROR:plus.nativeUI.alert("未知错误.");break}})},Gorefueling:function(){uni.navigateTo({url:"../../function/Buygasrolls/Buygasrolls",animationType:"pop-in",animationDuration:200})}}};exports.default=_default}).call(this,__webpack_require__("6e42")["default"])},f5b2:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:"page-body",staticStyle:{"overflow-y":"hidden"},style:{height:t.MapHeight}},[t.OpenMap?i("view",{staticClass:"maps",style:{height:t.MapHeight}},[i("view",{staticClass:"buttons",style:{height:t.titleheight}},[i("view",{staticClass:"left",class:{bom:t.mapleft},attrs:{eventid:"00bfa502-0"},on:{click:t.mapleftmethods}},[t._v("地图")]),i("view",{staticClass:"right",class:{bom:t.mapright},attrs:{eventid:"00bfa502-1"},on:{click:t.maprightmethods}},[t._v("列表")])]),i("view",{staticClass:"page-section page-section-gap",style:{display:t.maptrue}},[i("map",{staticStyle:{width:"100%"},style:{height:t.mapsheight},attrs:{scale:13,circles:t.circle,latitude:t.latitude,longitude:t.longitude,markers:t.covers,eventid:"00bfa502-2"},on:{controltap:t.clickcontrol,markertap:t.dianclick}})],1),i("view",{staticClass:"page-section page-section-gap slects",style:{display:t.maplbtrue}},t._l(t.coverlist,function(e,s){return i("view",{key:s,staticClass:"slects-lb",attrs:{eventid:"00bfa502-3-"+s},on:{click:function(i){t.getMappos(e)}}},[i("view",{staticClass:"select-btn-left"},[i("view",{staticStyle:{"font-size":"0.8rem"}},[t._v(t._s(e.name))]),i("view",{staticStyle:{"font-size":"0.6rem",color:"#C7C7CC",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},[t._v(t._s(e.address))])]),i("view",{staticClass:"select-btn-right"},[i("view",{staticStyle:{"font-size":"0.7rem",color:"#C7C7CC"}},[t._v(t._s(e.distances))])])])})),t.mappos?i("view",{staticClass:"mapdistance",style:{height:t.gotoheight}},[i("view",{staticClass:"mapdis"},[i("view",{staticClass:"mapdis-top"},[t._v(t._s(t.mapdisgood.name))]),i("view",{staticClass:"mapdis-bom"},[t._v(t._s(t.mapdisgood.distance)+" | "+t._s(t.mapdisgood.address))])]),i("view",{staticClass:"mapdisbtn"},[i("view",{staticClass:"mapbtn-jy",attrs:{eventid:"00bfa502-4"},on:{click:t.Gorefueling}},[t._v("去加油")]),i("view",{staticClass:"mapbtn",staticStyle:{"margin-left":"30rpx","margin-right":"10rpx"},attrs:{eventid:"00bfa502-5"},on:{click:t.Gomap}},[t._v("导航")])])]):t._e()]):t._e(),t.CloseMaps?i("view",{staticClass:"CloseMap",staticStyle:{width:"100%",background:"white"}},[t._m(0),i("view",{staticStyle:{"text-align":"center",color:"#C0C0C0","font-size":"0.8rem","margin-top":"5%"}},[t._v("地图加载失败，请检查网络是否良好")])]):t._e(),i("simpleLoading",{ref:"simpleLoading",attrs:{mpcomid:"00bfa502-0"}})],1)},o=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:"Closemap-img",staticStyle:{display:"flex","justify-content":"center","margin-top":"30%"}},[i("image",{staticStyle:{width:"200rpx",height:"200rpx"},attrs:{src:"../../../static/app-plus/no.png",mode:""}})])}];i.d(e,"a",function(){return s}),i.d(e,"b",function(){return o})},ff0b:function(t,e,i){"use strict";var s=i("b3b8"),o=i.n(s);o.a}},[["2b98","common/runtime","common/vendor"]]]);